package client.people;

import java.util.Calendar;

/**
 * 记录当前输入时的输入属性
 * @author Administrator
 *
 */
public class PeopleAttributeNow {
	/**
	 * 鼠标使用次数限制
	 */
	private static int limitMouseUseNum=2;
	/**
	 * 乱打字符速度限制
	 */
	private static float limitProficient1=(float)0.6;
	/**
	 * 不熟练速度限制
	 */
	private static float limitProficient2=(float)3;
	/**
	 * 不专心速度限制
	 */
	private static float limitProficient3=(float)10;
	/**
	 * 不平和回车使用次数限制
	 */
	private static int limitIrascible=2;
	private long startTime=0;//开始输入时间
	private long second=0;//输入时间
	private int mouseUseNum=0; //使用鼠标次数
	private int backKeyUseNum=0; //使用删除键的次数
	private float wordsNum=0; //输入框的输入字符数
	private boolean isHandle=false;
	private State state=new State();
	public void init(){
		this.second=0;
		this.mouseUseNum=0;
		this.backKeyUseNum=0;
		this.wordsNum=0;
		this.isHandle=false;
		this.state.init();
	}
	public long getSecond(){
		return this.second;
	}
	public void setStartTime(){
		System.out.println("计时开始。");
		Calendar calendar=Calendar.getInstance();
		this.startTime=calendar.getTimeInMillis()/1000;
	}
	public void setSecond(){
		System.out.println("计时结束。");
		Calendar calendar=Calendar.getInstance();
		this.second=calendar.getTimeInMillis()/1000-this.startTime;
	}
	public int getMouseUseNum(){
		return this.mouseUseNum;
	}
	public void addMouseUseNum(){
		this.mouseUseNum++;
	}
	public int getBackKeyUseNum(){
		return this.backKeyUseNum;
	}
	public void addBackKeyUseNum(){
		this.backKeyUseNum++;
	}
	public float getWordsNum(){
		return this.wordsNum;
	}
	public void addWordsNum(){
		this.wordsNum++;
	}
	public void handle(){
		if(this.wordsNum==0){
			return;
		}
		if(!this.isHandle){
			this.setSecond();
			this.state.handle();
			this.isHandle=true;
		}
	}
	public int getIrascible(){
		return state.irascible;
	}
	public int getProficient(){
		return state.proficient;
	}
	public int getNormal(){
		return state.normal;
	}
	class State{
		int irascible; //0,平和 ，1不平和
		int proficient; //-1，乱打或短小回复 0,熟练 ，1不熟练 ，2不专心
		int normal; //0,正常 ，1火星人
		
		public void init(){
			this.irascible=0;
			this.proficient=0;
			this.normal=0;
		}
		public void handle(){
			if(backKeyUseNum>PeopleAttributeNow.limitIrascible){
				this.irascible=1;
			}
			System.out.println("速度"+second/wordsNum+"鼠标使用次数"+mouseUseNum+"回车使用次数"+backKeyUseNum);
			if(wordsNum!=0){
				float r = second/wordsNum;
				if(r<PeopleAttributeNow.limitProficient1 || second<1){
					this.proficient=-1;
				} else if(r>PeopleAttributeNow.limitProficient2 || mouseUseNum>=PeopleAttributeNow.limitMouseUseNum){
					this.proficient=1;
				} 
				if(second/wordsNum>PeopleAttributeNow.limitProficient3){
					this.proficient=2;
				}
			}
			System.out.println("属性：平和"+this.irascible+"熟练"+this.proficient);
		}
	}
}
